@prefix ex: <http://example.org/> .
@prefix hmas: <https://purl.org/hmas/> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix hctl: <https://www.w3.org/2019/wot/hypermedia#> .
@prefix htv: <http://www.w3.org/2011/http#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xs: <https://www.w3.org/2001/XMLSchema#> .

#################################################################
#    Core Ontology
#################################################################

## Workspace
ex:NewsNetworkWS a hmas:Workspace ;
    hmas:contains ex:John, ex:Alice, ex:Bob, ex:Carol, ex:David, ex:Elton, ex:Walter, ex:AnnotatingService, ex:OrganizationBoard.

## Agents
ex:John a hmas:Agent ;
    hmas:isContainedIn ex:NewsNetworkWS ;
    hmas:isMemberOf ex:TOD_Network .
ex:Alice a hmas:Agent ;
    hmas:isContainedIn ex:NewsNetworkWS ;
    hmas:isMemberOf ex:TOD_Network .
ex:Bob a hmas:Agent ;
    hmas:isContainedIn ex:NewsNetworkWS ;
    hmas:isMemberOf ex:TOD_Network .
ex:Carol a hmas:Agent ;
    hmas:isContainedIn ex:NewsNetworkWS ;
    hmas:isMemberOf ex:TOD_Network .
ex:David a hmas:Agent ;
    hmas:isContainedIn ex:NewsNetworkWS ;
    hmas:isMemberOf ex:TOD_Network .
ex:Elton a hmas:Agent ;
    hmas:isContainedIn ex:NewsNetworkWS ;
    hmas:isMemberOf ex:TOD_Network .
ex:Walter a hmas:Agent ;
    hmas:isContainedIn ex:NewsNetworkWS ;
    hmas:isMemberOf ex:TOD_Network .
    
## Artifacts
ex:AnnotatingService a hmas:Artifact ;
    hmas:isContainedIn ex:NewsNetworkWS ;
    hmas:isMaterialOf ex:TOD_Network .
ex:OrganizationBoard a hmas:Artifact ;
    hmas:isContainedIn ex:NewsNetworkWS ;
    hmas:isMaterialOf ex:TOD_Network ;
	hmas:hasProfile ex:OrganizationBoardProfile.

#################################################################
#    Regulation Ontology
#################################################################

# SPECIFICATION

## NOTE: Regulation entities' specification can be represented
##       using implicit or explicit Target Class SHACL. Here we
##       decided to use implicit Target Class SHACL because we
##       do not expect any extensions for this scenario and we
##       wanted to avoid extra labels.

## Organization Specification
ex:NewsNetwork a sh:NodeShape ;
    rdfs:subClassOf hmas:Organization ;
    sh:property [
        sh:path hmas:hasOrganizationalValue ;
        sh:qualifiedValueShape [ sh:class ex:Accountability ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:hasOrganizationalValue ;
        sh:qualifiedValueShape [ sh:class ex:Transparency ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:providesRole ;
        sh:qualifiedValueShape [ sh:class ex:ActiveUser ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:providesRole ;
        sh:qualifiedValueShape [ sh:class ex:Journalist ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:providesRole ;
        sh:qualifiedValueShape [ sh:class ex:GeneralEvaluator ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:providesRole ;
        sh:qualifiedValueShape [ sh:class ex:GeneralInvestigator ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:providesRole ;
        sh:qualifiedValueShape [ sh:class ex:MediaInvestigator ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:providesRole ;
        sh:qualifiedValueShape [ sh:class ex:Admin ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;        
        ] ;
    sh:property [
        sh:path hmas:providesRole ;
        sh:qualifiedValueShape [ sh:class ex:Aggregator ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;        
        ] ;
	sh:property [
        sh:path hmas:providesRole ;
        sh:qualifiedValueShape [ sh:class ex:Control ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;        
        ] ;
    sh:property [
        sh:path hmas:proposesMission ;
        sh:qualifiedValueShape [ sh:class ex:ContentEvaluationMission ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:proposesMission ;
        sh:qualifiedValueShape [ sh:class ex:ArticleCredibilityMission ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:proposesMission ;
        sh:qualifiedValueShape [ sh:class ex:ImageProvenanceMission ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:proposesMission ;
        sh:qualifiedValueShape [ sh:class ex:SystemFunctionalityMission ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:proposesMission ;
        sh:qualifiedValueShape [ sh:class ex:ControlMission ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:proposesFacility ;
        sh:qualifiedValueShape [ sh:class ex:NewsNetworkAnnotatingService ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:proposesFacility ;
        sh:qualifiedValueShape [ sh:class ex:NewsNetworkOrganizationBoard ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] ;
	sh:property [
        sh:path hmas:proposesFacility ;
        sh:qualifiedValueShape [ sh:class ex:NewsNetworkGroupBoard ] ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        ] .

## Organizational Values
ex:Accountability a sh:NodeShape ;
    rdfs:subClassOf hmas:OrganizationalValue ;
    rdfs:comment "Accompany information evaluations with details about who contributed to the tackling disinformation process, e.g. which agents evaluated the information."@en ;
    rdfs:label "accountability"@en, "responsabilit√©"@fr .

ex:Transparency a sh:NodeShape ;
    rdfs:subClassOf hmas:OrganizationalValue ;
    rdfs:comment "Accompany information evaluations with details about how one contributed to the tackling disinformation process, e.g. what external services were used to evaluate the information."@en ;
    rdfs:label "transparency"@en, "transparence"@fr .
    
## Roles
ex:ActiveUser a sh:NodeShape ;
    rdfs:subClassOf hmas:Role .
ex:Journalist a sh:NodeShape ;
    rdfs:subClassOf ex:ActiveUser .
ex:GeneralEvaluator a sh:NodeShape ;
    rdfs:subClassOf ex:Journalist .
ex:GeneralInvestigator a sh:NodeShape ;
    rdfs:subClassOf ex:Journalist .
ex:MediaInvestigator a sh:NodeShape ;
    rdfs:subClassOf ex:Journalist .
ex:Admin a sh:NodeShape ;
    rdfs:subClassOf hmas:Role .
ex:Agreegator a sh:NodeShape ;
    rdfs:subClassOf ex:Admin .
ex:Control a sh:NodeShape ;
    rdfs:subClassOf hmas:Role .

## Missions
ex:ContentEvaluationMission a sh:NodeShape ;
    rdfs:subClassOf hmas:Mission .
ex:ArticleCredibilityMission a sh:NodeShape ;
    rdfs:subClassOf hmas:Mission .
ex:ImageProvenanceMission a sh:NodeShape ;
    rdfs:subClassOf hmas:Mission .
ex:SystemFunctionalityMission a sh:NodeShape ;
    rdfs:subClassOf hmas:Mission .
ex:ControlMission a sh:NodeShape ;
    rdfs:subClassOf hmas:Mission .

## Facilities
ex:NewsNetworkAnnotatingService a sh:NodeShape ;
    rdfs:subClassOf hmas:Facility .

## Group 
ex:ActiveUsers a sh:NodeShape ;
    rdfs:subClassOf hmas:Group .
ex:ArticleEvaluators a sh:NodeShape ;
    rdfs:subClassOf hmas:Group .

## Membership
ex:ActiveUserMembership a sh:NodeShape ;
    rdfs:subClassOf hmas:Membership ;
    sh:property [
        sh:path hmas:isMembershipOf ;
        sh:qualifiedValueShape [ sh:class hmas:Agent ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:isMembershipFor ;
        sh:qualifiedValueShape [ sh:class ex:ActiveUser ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:isMembershipIn ;
        sh:qualifiedValueShape [ sh:class ex:ActiveUsers ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] .

ex:ArticleGeneralEvaluatorMembership a sh:NodeShape ;
    rdfs:subClassOf hmas:Membership ;
    sh:property [
        sh:path hmas:isMembershipOf ;
        sh:qualifiedValueShape [ sh:class hmas:Agent ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:isMembershipFor ;
        sh:qualifiedValueShape [ sh:class ex:GeneralEvaluator ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:isMembershipIn ;
        sh:qualifiedValueShape [ sh:class ex:ArticleEvaluators ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] .

ex:ArticleGeneralInvestigatorMembership a sh:NodeShape ;
    rdfs:subClassOf hmas:Membership ;
    sh:property [
        sh:path hmas:isMembershipOf ;
        sh:qualifiedValueShape [ sh:class hmas:Agent ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:isMembershipFor ;
        sh:qualifiedValueShape [ sh:class ex:GeneralInvestigator ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:isMembershipIn ;
        sh:qualifiedValueShape [ sh:class ex:ArticleEvaluators ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] .

ex:ArticleMediaInvestigatorMembership a sh:NodeShape ;
    rdfs:subClassOf hmas:Membership ;
    sh:property [
        sh:path hmas:isMembershipOf ;
        sh:qualifiedValueShape [ sh:class hmas:Agent ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:isMembershipFor ;
        sh:qualifiedValueShape [ sh:class ex:MediaInvestigator ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:isMembershipIn ;
        sh:qualifiedValueShape [ sh:class ex:ArticleEvaluators ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] .

ex:ArticleAggregatorMembership a sh:NodeShape ;
    rdfs:subClassOf hmas:Membership ;
    sh:property [
        sh:path hmas:isMembershipOf ;
        sh:qualifiedValueShape [ sh:class hmas:Agent ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:isMembershipFor ;
        sh:qualifiedValueShape [ sh:class ex:Aggregator ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] ;
    sh:property [
        sh:path hmas:isMembershipIn ;
        sh:qualifiedValueShape [ sh:class ex:ArticleEvaluators ] ;
        sh:quantifiedMinCount 1 ;
        sh:quantifiedMaxCount 1 ;
        ] .

# INSTANTIATION

## Organizational Values
ex:TOD_Accountability a ex:Accountability .
ex:TOD_Transparency a ex:Transparency .

# Groups
## Groups
ex:TOD_ActiveUsers a ex:ActiveUsers ;
    hmas:structures ex:TOD_Network .

## Roles
ex:TOD_ActiveUser a ex:ActiveUser .
ex:TOD_Journalist a ex:Journalist .
ex:TOD_GeneralEvaluator a ex:GeneralEvaluator .
ex:TOD_GeneralInvestigator a ex:GeneralInvestigator .
ex:TOD_MediaInvestigator a ex:MediaInvestigator .
ex:TOD_Admin a ex:Admin .
ex:TOD_Aggregator a ex:Aggregator .
ex:TOD_Control a ex:Control .

## Missions
ex:TOD_ContentEvaluationMission a ex:ContentEvaluationMission .
ex:TOD_ArticleCredibilityMission a ex:ArticleCredibilityMission .
ex:TOD_ImageProvenanceMission a ex:ImageProvenanceMission .
ex:TOD_SystemFunctionalityMission a ex:SystemFunctionalityMission .
ex:TOD_ControlMission a ex:ControlMission .

## Facility
ex:TOD_NewsNetworkAnnotatingService a ex:NewsNetworkAnnotatingService.
ex:TOD_NewsNetworkOrganizationBoard a ex:NewsNetworkOrganizationBoard.
ex:TOD_Network hmas:proposesFacility ex:TOD_NewsNetworkGroupBoard.


## Organizations
ex:TOD_NetworkProfile a hmas:ResourceProfile;
	hmas:isProfileOf ex:TOD_Network.
	
ex:TOD_Network a ex:NewsNetwork ;
    hmas:hasProfile ex:TOD_NetworkProfile ;
    hmas:hasOrganizationalValue ex:TOD_Accountability, ex:TOD_Transparency ;
    hmas:providesRole ex:TOD_ActiveUser, ex:TOD_Journalist, ex:TOD_GeneralEvaluator, ex:TOD_GeneralInvestigator, ex:TOD_MediaInvestigator, ex:TOD_Admin, ex:TOD_Aggregator, ex:TOD_Contol;
    hmas:proposesMission ex:TOD_ContentEvaluationMission, ex:TOD_ArticleCredibilityMission, ex:TOD_ImageProvenanceMission, ex:TOD_SystemFunctionalityMission, ex:TOD_ControlMission ;
    hmas:proposesFacility ex:TOD_NewsNetworkAnnotatingService, ex:TOD_NewsNetworkOrganizationBoard .
	
#################################################################
#    Interaction Ontology
#################################################################

## Organization board profile
ex:organizationBoardProfile a hmas:ResourceProfile;
	hmas:isProfileOf ex:OrganizationBoard;
	hmas:exposesSignifier ex:enactActiveUserMembershipSignifier, ex:enactGroupSignifier.

## Signifiers
ex:enactActiveUserMembershipSignifier a hmas:Signifier;
	hmas:signifies ex:EnactActiveUserMembership.
ex:enactGroupSignifier a hmas:Signifier;
	hmas:signifies ex:EnactGroup.

## Action Execution Specifications
ex:EnactActiveUserMembership a sh:NodeShape ;
    rdfs:subClassOf hmas:ActionExecution ;
    sh:property [
    	sh:path prov:used ;
    	sh:hasValue ex:httpForm1 ;
  	] ;
  	sh:property [
    	sh:path hmas:hasInput;
    	sh:qualifiedValueShape [ sh:class ex:ActiveUserMembership ] ;
    	sh:qualifiedMinCount 1 ;
    	sh:qualifiedMaxCount 1 ;
  	] .
	
ex:EnactGroup a sh:NodeShape ;
    rdfs:subClassOf hmas:ActionExecution ;
    sh:property [
    	sh:path prov:used ;
    	sh:hasValue ex:httpForm2 ;
  	] ;
  	sh:property [
    	sh:path hmas:hasInput;
    	sh:qualifiedValueShape [ 
      		sh:or ( # this is not validated properly
				[ sh:class ex:ActiveUsers ]
				[ sh:class ex:ArticleEvaluators ] 
				)
        	] ;
    	sh:qualifiedMinCount 1 ;
    	sh:qualifiedMaxCount 1 ;
  	] .

## Forms
ex:httpForm1 a hctl:Form ;
	hctl:target <http://example.org/OrganizationBoard/memberships> ;
	hctl:forContentType "application/json" ;
	htv:methodName "POST".

ex:httpForm2 a hctl:Form ;
	hctl:target <http://example.org/OrganizationBoard/groups> ;
	hctl:forContentType "application/json" ;
	htv:methodName "POST".

## GROUP BOARD INITIALIZATION
ex:NewsNetworkWS hmas:contains ex:GroupBoard.

ex:groupBoard a hmas:Artifact ;
    hmas:isContainedIn ex:NewsNetworkWS ;
    hmas:isMaterialOf ex:TOD_Network ;
	hmas:hasProfile ex:groupBoardProfile.
	
## Group board profile
ex:groupBoardProfile a hmas:ResourceProfile;
	hmas:isProfileOf ex:groupBoard;
	hmas:exposesSignifier ex:enactMembershipSignifier.

## Signifiers
ex:enactMembershipSignifier a hmas:Signifier;
	hmas:signifies ex:EnactMembership.

## Action Execution Specifications
ex:EnactMembership a sh:NodeShape ;
    rdfs:subClassOf hmas:ActionExecution ;
    sh:property [
    	sh:path prov:used ;
    	sh:hasValue ex:httpForm3 ;
  	] ;
  	sh:property [
    	sh:path hmas:hasInput;
    	sh:qualifiedValueShape [ 
      		sh:or ( # this is not validated properly
				[ sh:class ex:ArticleGeneralEvaluatorMembership ]
				[ sh:class ex:ArticleGeneralInvestigatorMembership ] 
                [ sh:class ex:ArticleMediaInvestigatorMembership ] 
                [ sh:class ex:ArticleAggregatorMembership ] 
				)
        	] ;
    	sh:qualifiedMinCount 1 ;
    	sh:qualifiedMaxCount 1 ;
  	] .
	
## Forms
ex:httpForm3 a hctl:Form ;
	hctl:target <http://example.org/GroupBoard/memberships> ;
	hctl:forContentType "application/json" ;
	htv:methodName "POST".
