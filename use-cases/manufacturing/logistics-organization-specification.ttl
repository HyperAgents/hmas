@base <https://ns.inria.fr/hmas/> .

@prefix org-dataset: <http://ns.inria.fr/hmas/organizations/organization-dataset.ttl#> .
@prefix org-logistics: <http://ns.inria.fr/hmas/organizations/logistics-organization-specification.ttl#> .

@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix hmas: <https://purl.org/hmas/> .

@prefix agent-d: <workspaces/cup-production-site/agents/agent-d#> .

@prefix log-org: <organizations/log#> .

######################################
# Generic organization specification #
######################################

# Roles specifications

org-logistics:Deliverer a hmas:Role .

# Groups specifications

org-logistics:DeliveryGroup a sh:NodeShape , rdfs:Class ;
    rdfs:subClassOf hmas:Group .

# Memberships specifications

org-logistics:DelivererMembership a sh:NodeShape , rdfs:Class ;
    rdfs:subClassOf hmas:Membership ;
    sh:property [
        sh:path hmas:isMembershipOf ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        sh:qualifiedValueShape [ sh:class hmas:Agent ]
    ] , [
        sh:path hmas:isMembershipFor ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:hasValue org-logistics:Deliverer
    ] , [
        sh:path hmas:isMembershipIn ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        sh:qualifiedValueShape [ sh:class org-logistics:DeliveryGroup ]
    ] .

# Generic organization specification

org-logistics:GenericLogisticsCompanyOrganization a sh:NodeShape , rdfs:Class ;
    rdfs:subClassOf hmas:Organization ;
    sh:property [
        sh:path hmas:hasOrganizationalValue ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:hasValue org-dataset:IntegrityRespect
    ] , [
        sh:path hmas:providesRole ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:hasValue org-logistics:Deliverer
    ] , [
        sh:path hmas:isStructuredBy ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        sh:qualifiedValueShape [ sh:class org-logistics:DeliveryGroup ]
    ] .

###########################################
# Instanciation of the organization shape #
###########################################

org-logistics:LogDeliveryGroup a org-logistics:DeliveryGroup .

org-logistics:LogDelivererMembership a org-logistics:DelivererMembership ;
    hmas:isMembershipOf agent-d:agent ;
    hmas:isMembershipFor org-logistics:Deliverer ;
    hmas:isMembershipIn org-logistics:DeliveryGroup .

# Finally define the Logistics organization

log-org:organization a org-logistics:GenericLogisticsCompanyOrganization ;
    hmas:hasProfile log-org: ;
    hmas:hasOrganizationalValue org-dataset:IntegrityRespect ;
    hmas:providesRole org-logistics:Deliverer  ;
    hmas:isStructuredBy org-logistics:LogDeliveryGroup  .
