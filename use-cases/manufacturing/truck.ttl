@prefix m5stack: <https://docs.m5stack.com/en/products/> .

@prefix hmas: <https://purl.org/hmas/> .

@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix hctl: <https://www.w3.org/2019/wot/hypermedia#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema> .


m5stack:TruckCatalog a hmas:SignifiersCatalog ;
    hmas:proposesSignifier m5stack:TruckReadableBattery ,
                           m5stack:TruckReadableAccelerometer ,
                           m5stack:TruckSettableWheels .

###################
# Truck Endpoints #
###################

m5stack:TruckReadableBattery a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:minQualifiedShape 1 ;
            sh:maxQualifiedShape 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:ReadProperty, hmas:GetMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue "/properties/batteryvoltage"
                ]
            ]
        ]
    ] .

m5stack:TruckReadableAccelerometer a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:minQualifiedShape 1 ;
            sh:maxQualifiedShape 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:ReadProperty, hmas:GetMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue "/properties/motorcurrent"
                ]
            ]
        ]
    ] .

m5stack:TruckSettableWheels a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:minQualifiedShape 1 ;
            sh:maxQualifiedShape 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:InvokeAction, hmas:GetMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue "/actions/wheelControl"
                ]
            ]
        ] , [
            sh:path hmas:hasInput ;
            sh:minQualifiedShape 1 ;
            sh:maxQualifiedShape 1 ;
            sh:qualifiedValueShape m5stack:JsonControlWheelBody
        ]
    ] .


#######################
# Json Specifications #
#######################

m5stack:JsonControlWheelBody a sh:NodeShape ;
    sh:class m5stack:Vehicle ;
    sh:property [
        sh:path m5stack:hasDirectionValue ;
        sh:minExclusive 0 ;
        sh:maxExclusive 2 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer 
    ] , [
        sh:path m5stack:hasSpeedValue ;
        sh:minExclusive -7 ;
        sh:maxExclusive 7 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer 
    ] , [
        sh:path m5stack:hasDurationValue ;
        sh:minExclusive 0 ;
        sh:maxExclusive 5000 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer 
    ] .
