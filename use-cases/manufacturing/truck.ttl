#http://10.2.2.183
@prefix m5stack: <https://docs.m5stack.com/en/products/> .

m5stack:TruckCatalog a hmas:SignifiersCatalog ;
    hmas:proposesSignifier [ hmas:exposes m5stack:TruckReadableBattery ] ,
                           [ hmas:exposes m5stack:TruckReadableAccelerometer ] ,
                           [ hmas:exposes m5stack:TruckSettableWheels ] .

###################
# Truck Endpoints #
###################

m5stack:TruckReadableBattery a sh:NodeShape ;
    sh:class hmas:ActionExecution ;
    sh:property [
        sh:path prov:used ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape [
            sh:class hctl:Form ;
            sh:property hmas:ReadProperty, hmas:GetMethod, hmas:forApplicatonJson, [
                sh:path hctl:hasTarget ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:hasValue "/properties/batteryvoltage"
            ]
        ]
    ] .

m5stack:TruckReadableAccelerometer a sh:NodeShape ;
    sh:class hmas:ActionExecution ;
    sh:property [
        sh:path prov:used ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape [
            sh:class hctl:Form ;
            sh:property hmas:ReadProperty, hmas:GetMethod, hmas:forApplicatonJson, [
                sh:path hctl:hasTarget ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:hasValue "/properties/motorcurrent"
            ]
        ]
    ] .

m5stack:TruckSettableWheels a sh:NodeShape ;
    sh:class hmas:ActionExecution ;
    sh:property [
        sh:path prov:used ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape [
            sh:class hctl:Form ;
            sh:property hmas:InvokeAction, hmas:GetMethod, hmas:forApplicatonJson, [
                sh:path hctl:hasTarget ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:hasValue "/actions/wheelControl"
            ]
        ]
    ] , [
        sh:path hmas:hasInput ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape m5stack:JsonControlWheelBody
    ] .


#######################
# Json Specifications #
#######################

m5stack:JsonControlWheelBody a sh:NodeShape ;
    sh:class traffic:Vehicle ;
    sh:property [
        sh:path traffic:hasDirectionValue ;
        sh:minExclusive 0 ;
        sh:maxExclusive 2 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer 
    ] , [
        sh:path traffic:hasSpeedValue ;
        sh:minExclusive -7 ;
        sh:maxExclusive 7 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer 
    ] , [
        sh:path traffic:hasDurationValue ;
        sh:minExclusive 0 ;
        sh:maxExclusive 5000 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer 
    ] .
