@prefix artifacts: <http://ns.inria.fr/hmas/artifacts/> .
@prefix cherrybot: <https://interactions.ics.unisg.ch/cherrybot#> .

@prefix hmas: <https://purl.org/hmas/> .

@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix hctl: <https://www.w3.org/2019/wot/hypermedia#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .

######################
# Catalog Definition #
######################

artifacts:CherrybotCatalog a hmas:SignifiersCatalog ;
    hmas:proposesSignifier artifacts:CherrybotReadableOperator ,
                           artifacts:CherrybotReadablePosition ,
                           artifacts:CherrybotReadableTarget ,
                           artifacts:CherrybotReadableGripper ,
                           artifacts:CherrybotInitializableArm ,
                           artifacts:CherrybotSettableOperator ,
                           artifacts:CherrybotSettableTarget ,
                           artifacts:CherrybotSettableGripper ,
                           artifacts:CherrybotDeletableOperator .

#######################################
# Robotic Arm Endpoint specifications #
#######################################

artifacts:CherrybotReadableOperator a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:ReadProperty, hmas:GetMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue  "/operator"
                ]
            ]
        ] , [
            sh:path hmas:hasOutput ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape artifacts:JsonGetOperatorOutputBody
        ]
    ] .

artifacts:CherrybotReadablePosition a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:ReadProperty, hmas:GetMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue  "/tcp"
                ]
            ]
        ] , [
            sh:path hmas:hasOutput ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape artifacts:JsonGetPositionOutputBody
        ]
    ] .

artifacts:CherrybotReadableTarget a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:ReadProperty, hmas:GetMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue "/tcp/target"
                ]
            ]
        ] , [
            sh:path hmas:hasOutput ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape artifacts:JsonGetPositionOutputBody
        ]
    ] .

artifacts:CherrybotReadableGripper a sh:NodeShape , rdfs:Class ;
    hmas:signifies [
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:ReadProperty, hmas:GetMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue "/gripper"
                ]
            ]
        ] , [
            sh:path hmas:hasOutput ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:minExclusive 0 ;
            sh:maxExclusive 800 ;
            sh:datatype xsd:integer
        ]
    ] .

artifacts:CherrybotInitializableArm a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:InvokeAction, hmas:PutMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue "/initialize"
                ]
            ]
        ]
    ] .

artifacts:CherrybotSettableOperator a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:InvokeAction, hmas:PostMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue "/operator"
                ]
            ]
        ] , [
            sh:path hmas:hasInput ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape artifacts:JsonSetOperatorInputBody
        ]
    ] .

artifacts:CherrybotSettableTarget a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:InvokeAction, hmas:PostMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue "/tcp/target"
                ]
            ]
        ] , [
            sh:path hmas:hasInput ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape artifacts:JsonSetPositionInputBody
        ]
    ] .

artifacts:CherrybotSettableGripper a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:InvokeAction, hmas:PostMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue "/gripper"
                ]
            ]
        ] , [
            sh:path hmas:hasInput ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:datatype xsd:integer ;
            sh:minExclusive 0 ;
            sh:maxExclusive 800
        ]
    ] .

artifacts:CherrybotDeletableOperator a hmas:Signifier ;
    hmas:signifies [
        a sh:NodeShape , rdfs:Class ;
        sh:class hmas:ActionExecution ;
        sh:property [
            sh:path prov:used ;
            sh:qualifiedMinCount 1 ;
            sh:qualifiedMaxCount 1 ;
            sh:qualifiedValueShape [
                sh:class hctl:Form ;
                sh:property hmas:InvokeAction, hmas:DeleteMethod, hmas:forApplicatonJson, [
                    sh:path hctl:hasTarget ;
                    sh:minCount 1 ;
                    sh:maxCount 1 ;
                    sh:hasValue "/operator/%7Btoken%7D"
                ]
            ]
        ]
    ] .

################################
# Intput/Output specifications #
################################

artifacts:JsonGetOperatorOutputBody a sh:NodeShape ;
    sh:class cherrybot:OperatorWithTokenSchema ;
    sh:property [
        sh:path foaf:Name;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string
    ] , [
        sh:path foaf:mbox ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string
    ] , [
        sh:path cherrybot:operatorToken ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string
    ] .

artifacts:JsonSetOperatorInputBody a sh:NodeShape ;
    sh:class cherrybot:OperatorSchema ;
    sh:property [
        sh:path foaf:name ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string
    ] , [
        sh:path foaf:mbox ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string
    ] .

artifacts:JsonRotationElement a sh:NodeShape ;
    sh:class cherrybot:CoordinatesSchema ;
    sh:property [
        sh:path cherrybot:xCoordinate ;
        sh:minExclusive -7.2E2 ;
        sh:maxExclusive 7.2E2 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:float 
    ] , [
        sh:path cherrybot:yCoordinate ;
        sh:minExclusive -7.2E2 ;
        sh:maxExclusive 7.2E2 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:float 
    ] , [
        sh:path cherrybot:zCoordinate ;
        sh:minExclusive -7.2E2 ;
        sh:maxExclusive 7.2E2 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:float 
    ] .

artifacts:JsonTranslationElement a sh:NodeShape ;
    sh:class cherrybot:RotationSchema ;
    sh:property [
        sh:path cherrybot:roll ;
        sh:minExclusive -1.8E2 ;
        sh:maxExclusive 1.8E2 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:float 
    ] , [
        sh:path cherrybot:pitch ;
        sh:minExclusive -1.8E2 ;
        sh:maxExclusive 1.8E2 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:float 
    ] , [
        sh:path cherrybot:yaw ;
        sh:minExclusive -1.8E2 ;
        sh:maxExclusive 1.8E2 ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:float 
    ] .

artifacts:JsonGetPositionOutputBody a sh:NodeShape ;
    sh:class cherrybot:TcpTargetSchema ;
    sh:property [
        sh:path cherrybot:coordinate ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        sh:qualifiedValueShape artifacts:JsonTranslationElement
    ] , [
        sh:path cherrybot:rotation ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        sh:qualifiedValueShape artifacts:JsonRotationElement
    ] .

artifacts:JsonSetPositionInputBody a sh:NodeShape ;
    sh:class cherrybot:TcpMovementSchema ;
    sh:property [
        sh:path cherrybot:coordinate ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        sh:qualifiedValueShape artifacts:JsonTranslationElement
    ] , [
        sh:path cherrybot:rotation ;
        sh:qualifiedMinCount 1 ;
        sh:qualifiedMaxCount 1 ;
        sh:qualifiedValueShape artifacts:JsonRotationElement
    ] .
