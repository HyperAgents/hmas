@prefix : <https://purl.org/hmas/jacamo#> .
@prefix hmas: <https://purl.org/hmas/> .
@prefix hmas-dev: <https://purl.org/hmas/dev#> .
@prefix jacamo: <https://purl.org/hmas/jacamo#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix wotsec: <https://www.w3.org/2019/wot/security#> .
@prefix http: <http://www.w3.org/2011/http#> .
@prefix hctl: <https://www.w3.org/2019/wot/hypermedia#> .


jacamo:WorkspaceCatalog a hmas:SignifiersCatalog ;
    hmas:proposesSignifier jacamo:PerceivableWorkspace ,
                       jacamo:PartitionableWorkspace ,
                       jacamo:UpdatableWorkspace ,
                       jacamo:DeletableWorkspace ,
                       jacamo:JoinableWorkspace ,
                       jacamo:LeavableWorkspace ,
                       jacamo:FocusableWorkspace .

jacamo:PerceivableWorkspace hmas:signifies [
    a sh:NodeShape ;
    sh:class hmas:ActionExecution ;
    sh:property [
        sh:path prov:used ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape [
            sh:class hctl:Form ;
            sh:property hmas-dev:ReadProperty, hmas-dev:GetMethod, hmas-dev:forTextTurtle, [
                sh:path hctl:hasTarget ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:hasValue ""
            ]
        ]
    ] , [
        sh:path hmas:hasOutput ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape :WorkspaceProfileSpecification
    ] 
].

jacamo:PartionableWorkspace hmas:signifies [
    a sh:NodeShape ;
    sh:class hmas:ActionExecution ;
    sh:property [
        sh:path prov:used ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape [
            sh:class hctl:Form ;
            sh:property hmas-dev:InvokeAction, hmas-dev:PostMethod, hmas-dev:forTextTurtle, hmas-dev:SlugHeader, hmas-dev:XAgentWebIDHeader, [
                sh:path hctl:hasTarget ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:hasValue ""
            ]
        ]
    ] , [
        sh:path hmas:hasInput ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape :WorkspaceProfileSpecification
    ] , [
        sh:path hmas:hasOutput ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape :WorkspaceProfileSpecification
    ] 
].

jacamo:UpdatableWorkspace hmas:signifies [
    a sh:NodeShape ;
    sh:class hmas:ActionExecution ;
    sh:property [
        sh:path prov:used ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape [
            sh:class hctl:Form ;
            sh:property hmas-dev:InvokeAction, hmas-dev:PutMethod, hmas-dev:forTextTurtle, hmas-dev:XAgentWebIDHeader, [
                sh:path hctl:hasTarget ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:hasValue ""
            ]
        ]
    ] , [
        sh:path hmas:hasInput ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape :WorkspaceProfileSpecification
    ] , [
        sh:path hmas:hasOutput ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape :WorkspaceProfileSpecification
    ] 
].

jacamo:DeletableWorkspace hmas:signifies [
    a sh:NodeShape ;
    sh:class hmas:ActionExecution ;
    sh:property [
        sh:path prov:used ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape [
            sh:class hctl:Form ;
            sh:property hmas-dev:InvokeAction, hmas-dev:DeleteMethod, hmas-dev:XAgentWebIDHeader, [
                sh:path hctl:hasTarget ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:hasValue ""
            ]
        ]
    ] , [
        sh:path hmas:hasOutput ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape :WorkspaceProfileSpecification
    ] 
].

jacamo:JoinableWorkspace hmas:signifies [
    a sh:NodeShape ;
    sh:class hmas:ActionExecution ;
    sh:property [
        sh:path prov:used ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape [
            sh:class hctl:Form ;
            sh:property hmas-dev:InvokeAction, hmas-dev:PostMethod, hmas-dev:forTextTurtle, hmas-dev:XAgentWebIDHeader, [
                sh:path hctl:hasTarget ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:hasValue ""
            ]
        ]
    ] , [
        sh:path hmas:hasOutput ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape :ArtifactProfileSpecification
    ] 
].

jacamo:LeavableWorkspace hmas:signifies [
  	a sh:NodeShape ;
    sh:class hmas:ActionExecution ;
    sh:property [
        sh:path prov:used ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape [
            sh:class hctl:Form ;
            sh:property hmas-dev:InvokeAction, hmas-dev:PostMethod, hmas-dev:forTextTurtle, hmas-dev:XAgentWebIDHeader, [
                sh:path hctl:hasTarget ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:hasValue ""
            ]
        ]
    ] , [
        sh:path hmas:hasOutput ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape jacamo:BodyProfileSpecification
    ] 
].

jacamo:FocusableWorkspace hmas:signifies [
    a sh:NodeShape ;
    sh:class hmas:ActionExecution ;
    sh:property [
        sh:path prov:used ;
        sh:minQualifiedShape 1 ;
        sh:maxQualifiedShape 1 ;
        sh:qualifiedValueShape [
            sh:class hctl:Form ;
            sh:property hmas-dev:InvokeAction, hmas-dev:PostMethod, hmas-dev:XAgentWebIDHeader, [
                sh:path hctl:hasTarget ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:hasValue "/focus"
            ]
        ]
    ] 
].

#######################
# Body specifications #
#######################

jacamo:BodyProfileSpecification a sh:NodeShape ;
    sh:class hmas:ResourceProfile ;
    sh:property [
        sh:path hmas:isContainedIn ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype hmas:Workspace
    ], [ 
        sh:path hmas:isProfileOf ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype hmas:Body   
    ] .
